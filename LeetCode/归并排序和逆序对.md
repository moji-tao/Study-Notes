```cpp
    int merge(vector<int>& nums, int l, int m, int r)
    {
        vector<int> tmp(r - l + 1);
        int cnt = 0;
        int res = 0;
        int p1 = l;
        int p2 = m + 1;
        while(p1 <= m && p2 <= r)
        {
            if(nums[p1] <= nums[p2])
            {
                tmp[res++] = nums[p1++];
            }
            else
            {
                cnt += (m - p1 + 1);
                tmp[res++] = nums[p2++];
            }
        }
        while(p1 <= m)
        {
            tmp[res++] = nums[p1++];
        }
        while(p2 <= r)
        {
            tmp[res++] = nums[p2++];
        }
        for(int i = 0; i < tmp.size(); ++i)
        {
            nums[l + i] = tmp[i];
        }
        return cnt;
    }

    int mergeSort(vector<int>& nums, int l, int r)
    {
        if(l >= r)
            return 0;

        int mid = l + (r - l) / 2;
        
        return mergeSort(nums, l, mid) + mergeSort(nums, mid + 1, r) + merge(nums, l, mid, r);
    }

    int reversePairs(vector<int>& nums)
    {
        if(nums.size() == 1)
            return 0;
        
        return mergeSort(nums, 0, nums.size() - 1);
    }
```